<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Blog</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Merriweather:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        /* CSS Custom Properties for Theming */
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f9fafb;
            --bg-tertiary: #f3f4f6;
            --text-primary: #111827;
            --text-secondary: #6b7280;
            --text-tertiary: #9ca3af;
            --accent: #3b82f6;
            --accent-hover: #2563eb;
            --border: #e5e7eb;
            --shadow: rgba(0, 0, 0, 0.05);
            --shadow-hover: rgba(0, 0, 0, 0.1);
            --max-width: 1200px;
            --article-width: 720px;
            --radius: 0.75rem;
        }

        [data-theme="dark"] {
            --bg-primary: #121212;
            --bg-secondary: #1a1a1a;
            --bg-tertiary: #262626;
            --text-primary: #f9fafb;
            --text-secondary: #d1d5db;
            --text-tertiary: #9ca3af;
            --accent: #60a5fa;
            --accent-hover: #93bbfc;
            --border: #374151;
            --shadow: rgba(0, 0, 0, 0.2);
            --shadow-hover: rgba(0, 0, 0, 0.3);
        }

        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Header */
        header {
            background-color: var(--bg-primary-translucent, rgba(255, 255, 255, 0.8));
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }
        
        [data-theme="dark"] header {
            background-color: var(--bg-primary-translucent, rgba(18, 18, 18, 0.8));
        }

        nav {
            max-width: var(--max-width);
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
            padding: 0.5rem;
        }

        .nav-links a:hover {
            color: var(--text-primary);
        }

        .theme-toggle {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: var(--radius);
            transition: background-color 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .theme-toggle:hover {
            background-color: var(--bg-secondary);
        }

        .theme-toggle svg {
            width: 20px;
            height: 20px;
            fill: var(--text-secondary);
            transition: fill 0.3s ease;
        }
        .theme-toggle:hover svg {
            fill: var(--text-primary);
        }

        /* Hero Section */
        .hero {
            max-width: var(--max-width);
            margin: 0 auto;
            padding: 5rem 2rem;
            text-align: center;
        }

        .hero h1 {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero p {
            font-size: 1.25rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto 2.5rem;
        }

        .newsletter-form {
            display: flex;
            gap: 1rem;
            max-width: 450px;
            margin: 0 auto;
            transition: transform 0.3s ease;
        }
        .newsletter-form:focus-within {
             transform: translateY(-2px);
        }

        .newsletter-form input {
            flex: 1;
            padding: 0.75rem 1rem;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            font-size: 1rem;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        .newsletter-form input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 20%, transparent);
        }
        
        .btn-primary {
            padding: 0.75rem 1.5rem;
            background-color: var(--accent);
            color: white;
            border: none;
            border-radius: var(--radius);
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.3s ease;
        }

        .btn-primary:hover {
            background-color: var(--accent-hover);
            transform: translateY(-2px);
        }
        .btn-primary:disabled {
            background-color: var(--text-tertiary);
            cursor: not-allowed;
        }

        /* Featured Posts Section */
        .featured-section {
            background-color: var(--bg-secondary);
            padding: 5rem 0;
            transition: background-color 0.3s ease;
        }

        .section-title {
            font-size: 2.25rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 3rem;
        }

        .featured-grid {
            max-width: var(--max-width);
            margin: 0 auto;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2rem;
        }

        .post-card {
            background-color: var(--bg-primary);
            border-radius: var(--radius);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            border: 1px solid var(--border);
            display: flex;
            flex-direction: column;
        }

        .post-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px var(--shadow-hover);
        }

        .post-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .post-content {
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }

        .post-meta {
            display: flex;
            gap: 0.75rem;
            align-items: center;
            margin-bottom: 0.75rem;
            font-size: 0.875rem;
            color: var(--text-tertiary);
        }

        .post-category {
            color: var(--accent);
            font-weight: 600;
        }

        .post-title {
            font-size: 1.35rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            line-height: 1.4;
        }

        .post-excerpt {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 1.5rem;
            flex-grow: 1;
        }

        .read-more {
            color: var(--accent);
            text-decoration: none;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: gap 0.3s ease;
            align-self: flex-start;
        }

        .read-more:hover {
            gap: 0.75rem;
        }

        /* Article Page */
        .article-container {
            max-width: var(--article-width);
            margin: 0 auto;
            padding: 4rem 2rem;
        }

        .article-header {
            margin-bottom: 3rem;
        }

        .article-meta {
            display: flex;
            align-items: center;
            gap: 2rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .author-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .author-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            object-fit: cover;
        }

        .author-details {
            display: flex;
            flex-direction: column;
        }

        .author-name {
            font-weight: 600;
            color: var(--text-primary);
        }

        .publish-date {
            font-size: 0.875rem;
            color: var(--text-tertiary);
        }

        .reading-time {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-tertiary);
            font-size: 0.875rem;
        }

        .article-title {
            font-family: 'Merriweather', serif;
            font-size: 2.75rem;
            font-weight: 700;
            line-height: 1.2;
            margin-bottom: 1rem;
        }

        .article-subtitle {
            font-size: 1.35rem;
            color: var(--text-secondary);
            line-height: 1.5;
            font-family: 'Merriweather', serif;
            font-weight: 300;
        }

        /* Article Content Styles */
        .article-content {
            font-family: 'Merriweather', serif;
            font-size: 1.125rem;
            line-height: 1.8;
            color: var(--text-primary);
        }

        .article-content p {
            margin-bottom: 1.5rem;
        }

        .article-content h2,
        .article-content h3 {
            font-family: 'Inter', sans-serif;
            color: var(--text-primary);
            line-height: 1.3;
        }
        
        .article-content h2 {
            font-size: 1.75rem;
            font-weight: 700;
            margin: 3rem 0 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border);
        }

        .article-content h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 2.5rem 0 1rem;
        }

        .article-content blockquote {
            border-left: 3px solid var(--accent);
            padding-left: 1.5rem;
            margin: 2.5rem 0;
            font-style: italic;
            color: var(--text-secondary);
            font-size: 1.2rem;
        }

        .article-content code:not(pre > code) {
            background-color: var(--bg-tertiary);
            padding: 0.2rem 0.4rem;
            border-radius: 0.25rem;
            font-size: 0.9em;
            font-family: 'SF Mono', 'Consolas', 'Monaco', monospace;
        }

        .article-content pre {
            background-color: var(--bg-tertiary);
            padding: 1.5rem;
            border-radius: var(--radius);
            overflow-x: auto;
            margin: 2.5rem 0;
        }

        .article-content pre code {
            font-size: 0.9em;
            font-family: 'SF Mono', 'Consolas', 'Monaco', monospace;
        }

        .article-content img {
            max-width: 100%;
            height: auto;
            border-radius: var(--radius);
            margin: 2.5rem 0;
        }

        /* Progress Bar */
        .progress-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            z-index: 101; /* Above header */
        }
        .progress-bar {
            width: 0%;
            height: 100%;
            background-color: var(--accent);
            transition: width 0.1s linear;
        }

        /* Table of Contents */
        .toc {
            position: fixed;
            left: 50%;
            top: 50%;
            transform: translate(calc(var(--article-width) / 2 + 3rem), -50%);
            width: 220px;
            max-height: calc(100vh - 200px);
            overflow-y: auto;
        }
        .toc-title {
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-secondary);
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .toc-list { list-style: none; }
        .toc-item { margin-bottom: 0.75rem; }
        .toc-link {
            color: var(--text-tertiary);
            text-decoration: none;
            font-size: 0.875rem;
            transition: all 0.2s ease;
            display: block;
            border-left: 2px solid var(--border);
            padding: 0.25rem 1rem;
        }
        .toc-link:hover { color: var(--text-primary); }
        .toc-link.active {
            color: var(--accent);
            font-weight: 600;
            transform: translateX(5px);
            border-left-color: var(--accent);
        }

        /* Share Section */
        .share-section {
            margin: 4rem 0 2rem;
            padding: 2rem 0;
            border-top: 1px solid var(--border);
            border-bottom: 1px solid var(--border);
        }
        .share-title { font-weight: 600; margin-bottom: 1rem; }
        .share-buttons { display: flex; gap: 1rem; flex-wrap: wrap;}
        .share-btn {
            padding: 0.5rem 1rem;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            background-color: var(--bg-primary);
            color: var(--text-primary);
            text-decoration: none;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .share-btn:hover {
            background-color: var(--bg-secondary);
            transform: translateY(-2px);
            border-color: var(--text-secondary);
        }
        .share-btn svg { fill: currentColor; }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .toc { display: none; }
        }

        @media (max-width: 768px) {
            .hero h1 { font-size: 2.5rem; }
            .hero p { font-size: 1.125rem; }
            .newsletter-form { flex-direction: column; }
            .article-title { font-size: 2.25rem; }
            .nav-links { gap: 0.5rem; }
            .nav-links a:not(.logo) { display: none; } /* Hide text links, keep logo */
            .theme-toggle { display: flex; } /* Ensure theme toggle is always visible */
        }
        
        @media (max-width: 480px) {
             .hero h1 { font-size: 2rem; }
             .article-title { font-size: 1.8rem; }
             .article-subtitle { font-size: 1.15rem; }
             .featured-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <!-- Progress Bar -->
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <!-- Header -->
    <header>
        <nav>
            <a href="#" class="logo" onclick="showHomepage(event)">ModernBlog</a>
            <div class="nav-links">
                <a href="#">Articles</a>
                <a href="#">Topics</a>
                <a href="#">About</a>
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="sunIcon">
                        <path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/>
                    </svg>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="moonIcon" style="display: none;">
                        <path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938 7.999 7.999 0 0 0 4 12z"/>
                    </svg>
                </button>
            </div>
        </nav>
    </header>

    <!-- Main Content (Homepage) -->
    <main id="homepage">
        <section class="hero">
            <h1>Thoughts & Ideas</h1>
            <p>Exploring technology, design, and the art of building digital experiences that matter.</p>
            <form class="newsletter-form">
                <input type="email" placeholder="Enter your email" required>
                <button type="submit" class="btn-primary">Subscribe</button>
            </form>
        </section>

        <section class="featured-section">
            <h2 class="section-title">Featured Articles</h2>
            <div class="featured-grid">
                <!-- Post 1 -->
                <article class="post-card" onclick="showArticle()">
                    <img src="https://placehold.co/600x300/3b82f6/ffffff?text=Design" alt="Abstract design shapes" class="post-image" onerror="this.onerror=null;this.src='https://placehold.co/600x300/cccccc/ffffff?text=Image+Error';">
                    <div class="post-content">
                        <div class="post-meta"><span class="post-category">Design</span><span>•</span><span>5 min read</span></div>
                        <h3 class="post-title">Building Beautiful and Functional Blog Interfaces</h3>
                        <p class="post-excerpt">Discover the principles behind creating blog interfaces that readers love, combining aesthetics with usability.</p>
                        <a href="#" class="read-more" onclick="event.stopPropagation(); showArticle();">Read more →</a>
                    </div>
                </article>
                <!-- Post 2 -->
                <article class="post-card">
                    <img src="https://placehold.co/600x300/60a5fa/ffffff?text=Tech" alt="Circuit board pattern" class="post-image" onerror="this.onerror=null;this.src='https://placehold.co/600x300/cccccc/ffffff?text=Image+Error';">
                    <div class="post-content">
                        <div class="post-meta"><span class="post-category">Technology</span><span>•</span><span>8 min read</span></div>
                        <h3 class="post-title">The Future of Web Development: Trends to Watch</h3>
                        <p class="post-excerpt">An in-depth look at emerging technologies and methodologies shaping the future of web development.</p>
                        <a href="#" class="read-more">Read more →</a>
                    </div>
                </article>
                <!-- Post 3 -->
                <article class="post-card">
                    <img src="https://placehold.co/600x300/34d399/ffffff?text=Tutorial" alt="Code on a screen" class="post-image" onerror="this.onerror=null;this.src='https://placehold.co/600x300/cccccc/ffffff?text=Image+Error';">
                    <div class="post-content">
                        <div class="post-meta"><span class="post-category">Tutorial</span><span>•</span><span>12 min read</span></div>
                        <h3 class="post-title">A Complete Guide to Modern CSS Layouts</h3>
                        <p class="post-excerpt">Master CSS Grid and Flexbox with practical examples and best practices for responsive design.</p>
                        <a href="#" class="read-more">Read more →</a>
                    </div>
                </article>
            </div>
        </section>
    </main>

    <!-- Article Page (Hidden by default) -->
    <article id="articlePage" style="display: none;">
        <!-- Table of Contents (for large screens) -->
        <aside class="toc">
            <h3 class="toc-title">Contents</h3>
            <ul class="toc-list" id="tocList"></ul>
        </aside>
        
        <div class="article-container">
            <header class="article-header">
                <div class="article-meta">
                    <div class="author-info">
                        <img src="https://placehold.co/96x96/3b82f6/ffffff?text=JD" alt="Author Jane Doe" class="author-avatar" onerror="this.onerror=null;this.src='https://placehold.co/96x96/cccccc/ffffff?text=JD';">
                        <div class="author-details">
                            <span class="author-name">Jane Doe</span>
                            <span class="publish-date">June 11, 2025</span>
                        </div>
                    </div>
                    <div class="reading-time">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
                        <span>5 min read</span>
                    </div>
                </div>
                <h1 class="article-title">Building Beautiful and Functional Blog Interfaces</h1>
                <p class="article-subtitle">Discover the principles behind creating blog interfaces that readers love, combining aesthetics with usability.</p>
            </header>

            <div class="article-content">
                <p>Creating a successful blog interface requires more than just good looks. It's about finding the perfect balance between <strong>aesthetics and functionality</strong>, ensuring that your readers have an enjoyable experience while consuming your content.</p>

                <h2 id="principles">Core Design Principles</h2>
                <p>When designing a blog interface, several key principles should guide your decisions. First and foremost is <strong>readability</strong>. Your content should be easy to read, with appropriate font sizes, line heights, and contrast ratios.</p>

                <blockquote>"Good design is as little design as possible." - Dieter Rams</blockquote>

                <p>Typography plays a crucial role in blog design. Choose fonts that are not only beautiful but also highly legible across different devices and screen sizes. A combination of a sans-serif font for UI elements and a serif font for body text often works well.</p>

                <img src="https://placehold.co/1200x600/f3f4f6/6b7280?text=Typography+Example" alt="Example of clean typography" onerror="this.onerror=null;this.src='https://placehold.co/1200x600/cccccc/ffffff?text=Image+Error';">

                <h2 id="layout">Layout and Structure</h2>
                <p>The layout of your blog should guide readers naturally through your content. Use visual hierarchy to emphasize important elements and create a clear reading path. White space is your friend – it gives content room to breathe and reduces cognitive load.</p>

                <h3 id="grid">Grid Systems</h3>
                <p>Implementing a consistent grid system helps maintain visual harmony across your blog. Whether you choose a 12-column grid or something simpler, consistency is key to professional-looking design.</p>

                <h2 id="performance">Performance Matters</h2>
                <p>A beautiful design means nothing if your blog takes forever to load. Optimize images, minimize HTTP requests, and leverage browser caching to ensure your blog loads quickly. Consider implementing lazy loading for images.</p>

                <pre><code class="language-js">// Example: Lazy loading implementation
const images = document.querySelectorAll('img[data-src]');
const imageObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            const img = entry.target;
            img.src = img.dataset.src;
            imageObserver.unobserve(img);
        }
    });
});
images.forEach(img => imageObserver.observe(img));</code></pre>

                <h2 id="engagement">Enhancing Reader Engagement</h2>
                <p>Interactive elements can significantly boost reader engagement. Consider adding features like: progress indicators, estimated reading times, a table of contents, social sharing buttons, and comment sections to foster community discussion.</p>

                <h2 id="responsive">Responsive Design</h2>
                <p>With mobile traffic often exceeding desktop, responsive design is non-negotiable. Your blog should look and function beautifully on screens of all sizes. Test thoroughly across devices and consider mobile-first design principles.</p>

                <h2 id="conclusion">Conclusion</h2>
                <p>Building a beautiful and functional blog interface is an iterative process. Start with solid foundations, gather feedback from your readers, and continuously refine your design. Remember, the best blog design is one that gets out of the way and lets your content shine.</p>
            </div>

            <div class="share-section">
                <h3 class="share-title">Share this article</h3>
                <div class="share-buttons">
                    <a href="#" class="share-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24"><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/></svg>
                        <span>Twitter</span>
                    </a>
                    <a href="#" class="share-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>
                        <span>LinkedIn</span>
                    </a>
                    <a href="#" class="share-btn copy-link-btn">
                         <svg width="16" height="16" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
                         <span>Copy Link</span>
                    </a>
                </div>
            </div>
        </div>
    </article>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Theme Toggle ---
            const themeToggle = document.getElementById('themeToggle');
            const sunIcon = document.getElementById('sunIcon');
            const moonIcon = document.getElementById('moonIcon');
            const html = document.documentElement;

            const savedTheme = localStorage.getItem('theme') || 'light';
            html.setAttribute('data-theme', savedTheme);
            updateThemeIcon(savedTheme);

            themeToggle.addEventListener('click', () => {
                const currentTheme = html.getAttribute('data-theme');
                const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                html.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
                updateThemeIcon(newTheme);
            });

            function updateThemeIcon(theme) {
                if (theme === 'dark') {
                    sunIcon.style.display = 'none';
                    moonIcon.style.display = 'block';
                } else {
                    sunIcon.style.display = 'block';
                    moonIcon.style.display = 'none';
                }
            }
            
            // --- Newsletter Form ---
            document.querySelector('.newsletter-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const button = e.target.querySelector('button');
                button.textContent = 'Subscribed!';
                button.disabled = true;
                setTimeout(() => {
                    button.textContent = 'Subscribe';
                    button.disabled = false;
                    e.target.reset();
                }, 3000);
            });
            
            // --- Copy Link Functionality ---
            document.addEventListener('click', (e) => {
                const copyBtn = e.target.closest('.copy-link-btn');
                if (copyBtn) {
                    e.preventDefault();
                    const textToCopy = window.location.href;

                    const tempInput = document.createElement("input");
                    tempInput.value = textToCopy;
                    document.body.appendChild(tempInput);
                    tempInput.select();
                    
                    try {
                        document.execCommand('copy');
                        const originalContent = copyBtn.innerHTML;
                        copyBtn.innerHTML = `
                            <svg width="16" height="16" viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/></svg>
                            <span>Copied!</span>
                        `;
                        setTimeout(() => { copyBtn.innerHTML = originalContent; }, 2000);
                    } catch (err) {
                        console.error('Fallback: Oops, unable to copy', err);
                    }
                    document.body.removeChild(tempInput);
                }
            });
        });

        // --- Page Navigation ---
        const homepage = document.getElementById('homepage');
        const articlePage = document.getElementById('articlePage');

        function showHomepage(event) {
             if (event) event.preventDefault();
             homepage.style.display = 'block';
             articlePage.style.display = 'none';
             window.scrollTo({ top: 0, behavior: 'auto' });
             window.removeEventListener('scroll', handleArticleScroll);
        }

        function showArticle() {
            homepage.style.display = 'none';
            articlePage.style.display = 'block';
            window.scrollTo({ top: 0, behavior: 'auto' });
            initializeArticleFeatures();
        }
        
        // --- Article-Specific Features ---
        let isArticleInitialized = false;
        function initializeArticleFeatures() {
            if (isArticleInitialized) return;
            
            buildTableOfContents();
            window.addEventListener('scroll', handleArticleScroll);
            
            isArticleInitialized = true;
        }
        
        function handleArticleScroll() {
            updateProgressBar();
            updateTocActiveState();
        }

        // --- Table of Contents ---
        function buildTableOfContents() {
            const tocList = document.getElementById('tocList');
            const sections = document.querySelectorAll('.article-content h2');
            tocList.innerHTML = ''; // Clear existing
            sections.forEach(section => {
                const title = section.textContent;
                const id = section.id;
                const listItem = document.createElement('li');
                listItem.classList.add('toc-item');
                listItem.innerHTML = `<a href="#${id}" class="toc-link">${title}</a>`;
                tocList.appendChild(listItem);
            });
        }

        function updateTocActiveState() {
            const sections = document.querySelectorAll('.article-content h2');
            const tocLinks = document.querySelectorAll('.toc-link');
            let current = '';
            
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (scrollY >= sectionTop - 100) {
                    current = section.getAttribute('id');
                }
            });

            tocLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });
        }

        // --- Progress Bar ---
        function updateProgressBar() {
            const articleContent = document.querySelector('.article-content');
            if (!articleContent) return;

            const articleTop = articleContent.offsetTop;
            const contentHeight = articleContent.scrollHeight;
            const windowHeight = window.innerHeight;
            const scrollableHeight = contentHeight - windowHeight;
            const scrollTop = window.scrollY;
            
            let progress = 0;
            if (scrollTop > articleTop) {
                const scrolled = scrollTop - articleTop;
                progress = (scrolled / scrollableHeight) * 100;
            }
            
            document.getElementById('progressBar').style.width = `${Math.min(100, Math.max(0, progress))}%`;
        }
    </script>
</body>
</html>
